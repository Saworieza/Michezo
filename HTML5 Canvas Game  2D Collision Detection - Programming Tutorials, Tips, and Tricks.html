<!DOCTYPE html>
<!-- saved from url=(0067)http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/ -->
<html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><link rel="stylesheet" type="text/css" href="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/bY1LCoAwDEQvJMTexQvUJtTYL01EenvFhQvtamZ4D8bATlqtC5AKHpEE5FjFNa7KJX_WNIOEaNNKTZeNEoGTW9EeaYxqY0mT-X2cjJ70zYEhm22EFrE_lbO_AA.css" media="all"><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@StevenKLambert"><meta name="twitter:creator" content="@StevenKLambert"><meta name="twitter:title" content="HTML5 Canvas Game: 2D Collision Detection"><meta name="twitter:description" content="In the four installment of the Galaxian Style HTML5 game series, we&#39;ll be learning about how to use a quadtree to handle 2d collision detection in the game."><meta name="twitter:image:src" content="http://blog.sklambert.com/wp-content/uploads/2013/01/collision_detection.png"><title>HTML5 Canvas Game: 2D Collision Detection - Programming Tutorials, Tips, and Tricks</title><link rel="icon" type="image/ico" href="http://blog.sklambert.com/wp-content/themes/sklambertTheme/imgs/favicon.ico"><meta name="description" content="In the four installment of the Galaxian Style HTML5 game series, we&#39;ll be learning about how to use a quadtree to handle 2d collision detection in the game."><link rel="canonical" href="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks.html"> <script src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/cb=gapi.loaded_1" async=""></script><script src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/cb=gapi.loaded_0" async=""></script><script type="text/javascript" async="" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/plusone.js" gapi_processed="true"></script><script type="text/javascript" async="" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/ga.js"></script><script type="text/javascript" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/M9bPKixNLarUMYYydHMz04sSS1L1cjPzAA.js"></script><link rel="shortlink" href="http://wp.me/p2qsZ3-by"><script type="text/javascript">/*<![CDATA[*/function external_links_in_new_windows_loop(){if(!document.links){document.links=document.getElementsByTagName('a');}
var change_link=false;var force='';var ignore='';for(var t=0;t<document.links.length;t++){var all_links=document.links[t];change_link=false;if(document.links[t].hasAttribute('onClick')==false){if(all_links.href.search(/^http/)!=-1&&all_links.href.search('blog.sklambert.com')==-1){change_link=true;}
if(force!=''&&all_links.href.search(force)!=-1){change_link=true;}
if(ignore!=''&&all_links.href.search(ignore)!=-1){change_link=false;}
if(change_link==true){document.links[t].setAttribute('onClick','javascript:window.open(\''+all_links.href+'\'); return false;');document.links[t].removeAttribute('target');}}}}
function external_links_in_new_windows_load(func)
{var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){oldonload();func();}}}
external_links_in_new_windows_load(external_links_in_new_windows_loop);/*]]>*/</script><script type="text/javascript">window._zem_rp_blog_id='6970965';window._zem_rp_post_id='716';window._zem_rp_thumbnails=true;window._zem_rp_post_title='HTML5+Canvas+Game%3A+2D+Collision+Detection';window._zem_rp_post_tags=['galaxian','game+development','html5','javascript','tutorial','tutorials','box','laser','tutori','2d','style','game','handl','detect','canva','arrow','video','space','html5','lt','gt'];window._zem_rp_static_base_url='http://content.zemanta.com/static/';window._zem_rp_wp_ajax_url='http://blog.sklambert.com/wp-admin/admin-ajax.php';window._zem_rp_plugin_version='1.8.1';window._zem_rp_num_rel_posts='5';window._zem_rp_remote_recommendations=false;</script><script type="text/javascript" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/pageview.js" async=""></script><link rel="stylesheet" href="http://blog.sklambert.com/wp-content/plugins/related-posts-by-zemanta/static/themes/vertical-m.css?version=1.8.1"><style type="text/css">img#wpstats{display:none}</style><script type="text/javascript">var _gaq=_gaq||[];_gaq.push(['_setAccount','UA-32599230-1']);_gaq.push(['_setDomainName','sklambert.com']);_gaq.push(['_trackPageview']);(function(){var ga=document.createElement('script');ga.type='text/javascript';ga.async=true;ga.src=('https:'==document.location.protocol?'https://ssl':'http://www')+'.google-analytics.com/ga.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(ga,s);})();</script><script async="" type="text/javascript" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/count.js"></script><script async="" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/count-data.js"></script></head><body class="single single-post postid-716 single-format-standard"> <header class="site-header" role="banner"><div class="container"> <section class="header-group"> <a class="logo" href="http://blog.sklambert.com/" rel="home"> <span class="assistive-text">HTML5 Gamer</span> </a><h1 class="site-title"><a class="title-link" href="http://blog.sklambert.com/" rel="home">HTML5 Gamer</a></h1><p class="site-description"><a class="title-link" href="http://blog.sklambert.com/" rel="home">JavaScript and HTML5 Game Development</a></p> </section><form method="get" class="search-form" action="http://blog.sklambert.com/" role="search"> <label for="s" class="assistive-text">Search</label> <input type="text" class="search-input" name="s" value="" id="s" placeholder="Search …"> <button type="submit" class="icon-search search-submit" value=""></button></form></div> </header> <nav class="site-navigation" role="navigation"><div class="container"><h1 class="assistive-text">Menu</h1> <a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#content" class="assistive-text skip-link" title="Skip to main content">Skip to main content</a><div class="mobile-menus mobile-memu-container"> <a id="toggle-menu" href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#" class="mobile-menu">☰ Menu</a></div><div class="menu-master-container"><ul id="menu-master" class="menu"><li id="menu-item-253" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-253"><a class="menu-link" href="http://blog.sklambert.com/">Home</a></li><li id="menu-item-1310" class="menu-item menu-item-type-taxonomy menu-item-object-category menu-item-1310"><a class="menu-link" href="http://blog.sklambert.com/category/articles/">Articles</a></li><li id="menu-item-1311" class="menu-item menu-item-type-taxonomy menu-item-object-category current-post-ancestor current-menu-parent current-post-parent menu-item-1311"><a class="menu-link" href="http://blog.sklambert.com/category/tutorials/">Tutorials</a></li><li id="menu-item-1507" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1507"><a class="menu-link" href="http://blog.sklambert.com/games/">Games</a></li><li id="menu-item-777" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-777"><a class="menu-link" href="http://blog.sklambert.com/jetpack-post-views/">WP Plugins</a></li><li id="menu-item-1312" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-1312"><a class="menu-link" href="http://blog.sklambert.com/archives/">Archives</a></li></ul></div><div class="mobile-menus mobile-search-container"> <a id="toggle-search" href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#" class="mobile-search icon-search">&nbsp;</a></div></div> </nav> <main role="main"> <section id="content" class="main"> <article id="post-716" class="post-716 post type-post status-publish format-standard hentry category-tutorials tag-galaxian tag-game-development tag-html5 tag-javascript tag-tutorial entry-content"> <header class="entry-header"><h1 class="entry-title">HTML5 Canvas Game: 2D Collision Detection</h1><div class="entry-meta"><time class="entry-date icon-calendar" datetime="2013-01-13T01:04:04+00:00" pubdate="">January 13, 2013</time><span class="entry-categories icon-folder"><a href="http://blog.sklambert.com/category/tutorials/" title="View all posts in Tutorials" rel="category tag">Tutorials</a></span><span class="entry-tags icon-tags"><a href="http://blog.sklambert.com/tag/galaxian/" rel="tag">Galaxian</a>, <a href="http://blog.sklambert.com/tag/game-development/" rel="tag">Game Development</a>, <a href="http://blog.sklambert.com/tag/html5/" rel="tag">HTML5</a>, <a href="http://blog.sklambert.com/tag/javascript/" rel="tag">JavaScript</a>, <a href="http://blog.sklambert.com/tag/tutorial/" rel="tag">Tutorial</a></span><span class="entry-comments icon-bubbles"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#disqus_thread" title="Comment on HTML5 Canvas Game: 2D Collision Detection" data-disqus-identifier="716 http://blog.sklambert.com/?p=716">17 Comments</a></span></div> </header><div class="sharedaddy sd-sharing-enabled"><div class="robots-nocontent sd-block sd-social sd-social-official sd-sharing"><h3 class="sd-title">Share this:</h3><div class="sd-content"><ul><li class="share-twitter"><div class="twitter_button"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/tweet_button.html" style="width:101px; height:20px;"></iframe></div></li><li class="share-google-plus-1"><div class="googleplus1_button"><div id="___plus_0" style="text-indent: 0px; margin: 0px; padding: 0px; background-color: transparent; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 82px; height: 20px; background-position: initial initial; background-repeat: initial initial;"><iframe frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 82px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" width="100%" id="I0_1399294269167" name="I0_1399294269167" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/sharebutton.html" data-gapiattached="true" title="+Share"></iframe></div></div></li><li class="share-facebook"><div class="like_button"><iframe src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/like.html" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:96px; height:21px;" allowtransparency="true"></iframe></div></li><li class="share-end"></li></ul></div></div></div><div class="featured-image"></div><meta name="description" content="In the four installment of the Galaxian Style HTML5 game series, we&#39;ll be learning about how to use a quadtree to handle 2d collision detection in the game."><div class="series-next-prev-wrapper top"><div class="series-prev"> <a href="http://blog.sklambert.com/html5-canvas-game-the-enemy-ships/" title="HTML5 Canvas Game: The Enemy Ships" class="series-prev-link">« Previous series post</a></div><div class="series-next"> <a href="http://blog.sklambert.com/html5-canvas-game-html5-audio-and-finishing-touches/" title="HTML5 Canvas Game: HTML5 Audio and Finishing Touches" class="series-next-link">Next series post »</a></div></div><p><img class="wp-image-717 alignnone" alt="Enemies being shot out of space with lasers." src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/collision_detection.png" width="300" height="180"></p><p>In the fourth tutorial of the <a href="http://blog.sklambert.com/galaxian-html5-game/">Galaxian Style HTML5 game</a>&nbsp;series, we’ll be learning about handling collision detection in 2D space and making the bullets hit and destroy ships.</p><p><span id="more-716"></span></p><p>Difficulty: Medium<br> Languages: <abbr>HTML5</abbr>, JavaScript<br> Code:&nbsp;<a href="https://github.com/straker/galaxian-canvas-game/tree/master/part4" onclick="javascript:window.open(&#39;https://github.com/straker/galaxian-canvas-game/tree/master/part4&#39;); return false;">https://github.com/straker/galaxian-canvas-game/tree/master/part4</a></p><h2 id="part" class="sub-title"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#part" class="permalink" title="Link to this section">Part 4</a></h2><p>We’ll begin by seeing the final result of this tutorial. Make sure you click inside the game if the controls aren’t working.<br> Controls: Move – Arrow keys (←↑↓→)<br> Shoot – Spacebar</p><p><iframe src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/space_shooter_part_four.html" height="410" width="650"></iframe></p><p>Hitting enemies now results in the enemy disappearing. For the purposes of this demonstration, your ship will not disappear when you get hit by an enemy bullet.</p><h3 id="d-collision-detection" class="sub-title"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#d-collision-detection" class="permalink" title="Link to this section">2D Collision Detection</a></h3><p>To start out this tutorial, we’ll talk about how to handle 2D collision detection. There are <a href="http://devmag.org.za/2009/04/13/basic-collision-detection-in-2d-part-1/" onclick="javascript:window.open(&#39;http://devmag.org.za/2009/04/13/basic-collision-detection-in-2d-part-1/&#39;); return false;">many algorithms</a>&nbsp;for detecting when <a href="http://gamedev.tutsplus.com/tutorials/implementation/collision-detection-with-the-separating-axis-theorem/" onclick="javascript:window.open(&#39;http://gamedev.tutsplus.com/tutorials/implementation/collision-detection-with-the-separating-axis-theorem/&#39;); return false;">two objects are touching</a> in 2D space. For our simple game, we don’t have to implement a complex detection algorithm&nbsp;since video games just have to <a href="http://en.wikipedia.org/wiki/Collision_detection#Video_games" onclick="javascript:window.open(&#39;http://en.wikipedia.org/wiki/Collision_detection#Video_games&#39;); return false;">estimate it reasonably well</a>. Thus, we’ll be using a bounding box test for our collision detection.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">if</span> <span class="token punctuation">(</span>object1<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> object2<span class="token punctuation">.</span>x <span class="token operator">+</span> object2<span class="token punctuation">.</span>width  <span class="token operator">&amp;&amp;</span> object1<span class="token punctuation">.</span>x <span class="token operator">+</span> object1<span class="token punctuation">.</span>width  <span class="token operator">&gt;</span> object2<span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span>
		object1<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> object2<span class="token punctuation">.</span>y <span class="token operator">+</span> object2<span class="token punctuation">.</span>height <span class="token operator">&amp;&amp;</span> object1<span class="token punctuation">.</span>y <span class="token operator">+</span> object1<span class="token punctuation">.</span>height <span class="token operator">&gt;</span> object2<span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment" spellcheck="true">
// The objects are touching
</span><span class="token punctuation">}</span>
</code></pre></div><p>A bounding box collision detection algorithm takes two objects and checks to see if the bounds of the first object are within the bounds of the second object. It requires four checks, one for each edge of the bounding box.</p><p>To implement collision detection we could just put this algorithm in a loop and check each object against every other object. However, think about how many objects are present in our game. At any one time there could be 18 enemies, one player ship, up to 30 player bullets, and up to 50 enemy bullets. That’s almost 100 objects that could be on the screen at once.</p><p>If we were to run this algorithm in a loop as described above, the game would have to perform about 5,000 checks just to check if two objects collide. And since we have to run our collision detection algorithm every frame, it can really slow the game down. So what we need to do is help speed up collision detection.</p><h3 id="improving-d-collision-detection" class="sub-title"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#improving-d-collision-detection" class="permalink" title="Link to this section">Improving 2D Collision Detection</a></h3><p>Just improving the bounding box algorithm won’t help us speed up collision detection because the main problem lies in how many checks the algorithm has to perform. Therefore, the best way to speed up collision detection is to reduce the number of checks the algorithm has to perform. For that, we will use a technique known as <a href="http://en.wikipedia.org/wiki/Space_partitioning" onclick="javascript:window.open(&#39;http://en.wikipedia.org/wiki/Space_partitioning&#39;); return false;">spatial partitioning</a>.</p><h4 id="update-from-original-post" class="sub-title"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#update-from-original-post" class="permalink" title="Link to this section">Update from original post</a></h4><p>This post has gotten a lot of attention recently with a lot of discussion of my use of spatial partitioning for such a simple game. I would like to address these topics as they had good points that I feel you should know.</p><p>It should be known that spatial partitioning is not the&nbsp;<em>only</em> way to speed up collision detection. There are a lot easier ways to do it. You could just grab all the enemy bullets and check each one against just the player ship, and then grab all the player bullets and check them against each enemy. This is just one example and it would achieve the same effect of reducing the number of collision checks.</p><p>The use of spatial partitioning for such a simple game is overkill, that I readily admit and agree with. Spatial partitioning&nbsp;is usually used in much larger scale games where the overhead of running collision detection is greater then the use of a quadtree (quadtrees add a lot of additional overhead to a game). The reason I decided to use spatial partitioning&nbsp;in this very simple example is two fold.</p><p>The first reason is that a friend and I were making a game that had a lot of bullets and enemies on the screen (well into the thousands). We ran into the issue where the game began to lag and slow down the more bullets and enemies we added. We discovered that the game was lagging due to performing a lot of collision detection with so many objects (we initially used the example given above). After a lot of research, we decided to use a quadtree and were then able to maintain 60FPS. Spatial partitioning and quadtrees were hard for us to understand when we started out, and it was basically just trail and error trying to get them to work for us. It would have been nice to have someone explain them to us and why and how they worked.</p><p>The second reason that I wanted to explain spatial partitioning is that this game was intended to be a springboard, and I want developers to take the code and expand upon it for their own games. I tend to develop code with the future in mind, so I decided that teaching developers about a method for collision detection that might save them time and a possible headache in the future was a good idea.</p><p>Thus, I use spatial partitioning for this tutorial. It is just one tool in a developers toolbox that I feel is worth knowing. Being a good developer means knowing when to properly use each tool. I hope you understand the drawbacks of using spatial partitioning, but also I hope you understand my reasoning for using it and teaching it in this tutorial. I will reiterate the fact that the use of quadtrees and spatial partitioning for small scale games is&nbsp;unnecessary, as you can&nbsp;achieve&nbsp;better solutions for less overhead. But hey, the game maintains 60FPS even with a quadtree implementation, so the overhead for such a small game isn’t hurting the performance of it :).</p><p>Thank you for discussing this article, it’s been great! I’m blown away at the amount of attention it’s&nbsp;received. Please feel free to leave a comment discussing the article and any concerns or improvements you have, or you could send me a <a href="https://twitter.com/StevenKLambert" onclick="javascript:window.open(&#39;https://twitter.com/StevenKLambert&#39;); return false;">tweet</a> as well.</p><p>Now back to the tutorial…</p><h3 id="spatial-partitioning" class="sub-title"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#spatial-partitioning" class="permalink" title="Link to this section">Spatial Partitioning</a></h3><p>Spatial partitioning takes a confined space (in this case our game) and subdivides it into multiple smaller spaces. By subdividing the space, we are able to quickly determine which objects belong to the same area and only have to run collision detection against those objects. Any object that doesn’t belong in the same space cannot collide, so we don’t have to waste a check on it.</p><p>By dividing up the space, we are able to reduce our collision detection checks from 5,000 to about 100 per frame –&nbsp;that’s a huge improvement! To implement this technique, we will use a data structure called a <a href="http://en.wikipedia.org/wiki/Quadtree" onclick="javascript:window.open(&#39;http://en.wikipedia.org/wiki/Quadtree&#39;); return false;">quadtree</a>. You can <a href="http://gamedev.tutsplus.com/tutorials/implementation/quick-tip-use-quadtrees-to-detect-likely-collisions-in-2d-space/" onclick="javascript:window.open(&#39;http://gamedev.tutsplus.com/tutorials/implementation/quick-tip-use-quadtrees-to-detect-likely-collisions-in-2d-space/&#39;); return false;">read all about quadtrees</a> in this article I wrote for <a href="http://gamedev.tutsplus.com/" onclick="javascript:window.open(&#39;http://gamedev.tutsplus.com/&#39;); return false;">Gamedevtuts+</a></p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">/**
 * QuadTree object.
 *
 * The quadrant indexes are numbered as below:
 *     |
 *  1  |  0
 * —-+—-
 *  2  |  3
 *     |
 */</span>
<span class="token keyword">function</span> <span class="token function">QuadTree<span class="token punctuation">(</span></span>boundBox<span class="token punctuation">,</span> lvl<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> maxObjects <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>bounds <span class="token operator">=</span> boundBox <span class="token operator">||</span> <span class="token punctuation">{</span>
		x<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		y<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		width<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
		height<span class="token punctuation">:</span> <span class="token number">0</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> level <span class="token operator">=</span> lvl <span class="token operator">||</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> maxLevels <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/*
	 * Clears the quadTree and all nodes of objects
	 */</span>
	this<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> this<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">clear<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		this<span class="token punctuation">.</span>nodes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/*
	 * Get all objects in the quadTree
	 */</span>
	this<span class="token punctuation">.</span>getAllObjects <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>returnedObjects<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> this<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">getAllObjects<span class="token punctuation">(</span></span>returnedObjects<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> objects<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			returnedObjects<span class="token punctuation">.</span><span class="token function">push<span class="token punctuation">(</span></span>objects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> returnedObjects<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/*
	 * Return all objects that the object could collide with
	 */</span>
	this<span class="token punctuation">.</span>findObjects <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>returnedObjects<span class="token punctuation">,</span> obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log<span class="token punctuation">(</span></span><span class="token string">"UNDEFINED OBJECT"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">var</span> index <span class="token operator">=</span> this<span class="token punctuation">.</span><span class="token function">getIndex<span class="token punctuation">(</span></span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span> <span class="token operator">&amp;&amp;</span> this<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findObjects<span class="token punctuation">(</span></span>returnedObjects<span class="token punctuation">,</span> obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> objects<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			returnedObjects<span class="token punctuation">.</span><span class="token function">push<span class="token punctuation">(</span></span>objects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> returnedObjects<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/*
	 * Insert the object into the quadTree. If the tree
	 * excedes the capacity, it will split and add all
	 * objects to their corresponding nodes.
	 */</span>
	this<span class="token punctuation">.</span>insert <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> obj <span class="token operator">===</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>obj <span class="token keyword">instanceof</span> <span class="token class-name">Array</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span><span class="token function">insert<span class="token punctuation">(</span></span>obj<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>nodes<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">var</span> index <span class="token operator">=</span> this<span class="token punctuation">.</span><span class="token function">getIndex<span class="token punctuation">(</span></span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment" spellcheck="true">	// Only add the object to a subnode if it can fit completely
</span>		<span class="token comment" spellcheck="true">	// within one
</span>			<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">insert<span class="token punctuation">(</span></span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">return</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		objects<span class="token punctuation">.</span><span class="token function">push<span class="token punctuation">(</span></span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">	// Prevent infinite splitting
</span>		<span class="token keyword">if</span> <span class="token punctuation">(</span>objects<span class="token punctuation">.</span>length <span class="token operator">&gt;</span> maxObjects <span class="token operator">&amp;&amp;</span> level <span class="token operator">&lt;</span> maxLevels<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span><span class="token function">split<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> objects<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> index <span class="token operator">=</span> this<span class="token punctuation">.</span><span class="token function">getIndex<span class="token punctuation">(</span></span>objects<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">!</span><span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">insert<span class="token punctuation">(</span></span><span class="token punctuation">(</span>objects<span class="token punctuation">.</span><span class="token function">splice<span class="token punctuation">(</span></span>i<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
				<span class="token keyword">else</span> <span class="token punctuation">{</span>
					i<span class="token operator">++</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/*
	 * Determine which node the object belongs to. -1 means
	 * object cannot completely fit within a node and is part
	 * of the current node
	 */</span>
	this<span class="token punctuation">.</span>getIndex <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> index <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> verticalMidpoint <span class="token operator">=</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>x <span class="token operator">+</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> horizontalMidpoint <span class="token operator">=</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>y <span class="token operator">+</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">	// Object can fit completely within the top quadrant
</span>		<span class="token keyword">var</span> topQuadrant <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>y <span class="token operator">&lt;</span> horizontalMidpoint <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>y <span class="token operator">+</span> obj<span class="token punctuation">.</span>height <span class="token operator">&lt;</span> horizontalMidpoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">	// Object can fit completely within the bottom quandrant
</span>		<span class="token keyword">var</span> bottomQuadrant <span class="token operator">=</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>y <span class="token operator">&gt;</span> horizontalMidpoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">	// Object can fit completely within the left quadrants
</span>		<span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>x <span class="token operator">&lt;</span> verticalMidpoint <span class="token operator">&amp;&amp;</span>
				obj<span class="token punctuation">.</span>x <span class="token operator">+</span> obj<span class="token punctuation">.</span>width <span class="token operator">&lt;</span> verticalMidpoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>topQuadrant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				index <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bottomQuadrant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				index <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token comment" spellcheck="true">	// Object can fix completely within the right quandrants
</span>		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>obj<span class="token punctuation">.</span>x <span class="token operator">&gt;</span> verticalMidpoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>topQuadrant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>bottomQuadrant<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				index <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> index<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/*
	 * Splits the node into 4 subnodes
	 */</span>
	this<span class="token punctuation">.</span>split <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment" spellcheck="true">	// Bitwise or [html5rocks]
</span>		<span class="token keyword">var</span> subWidth <span class="token operator">=</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token keyword">var</span> subHeight <span class="token operator">=</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token number">0</span><span class="token punctuation">;</span>
</code><p><code class=" language-javascript">		this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QuadTree</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			x<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>x <span class="token operator">+</span> subWidth<span class="token punctuation">,</span>
			y<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>y<span class="token punctuation">,</span>
			width<span class="token punctuation">:</span> subWidth<span class="token punctuation">,</span>
			height<span class="token punctuation">:</span> subHeight
		<span class="token punctuation">}</span><span class="token punctuation">,</span> level<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QuadTree</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			x<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
			y<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>y<span class="token punctuation">,</span>
			width<span class="token punctuation">:</span> subWidth<span class="token punctuation">,</span>
			height<span class="token punctuation">:</span> subHeight
		<span class="token punctuation">}</span><span class="token punctuation">,</span> level<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QuadTree</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			x<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>x<span class="token punctuation">,</span>
			y<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>y <span class="token operator">+</span> subHeight<span class="token punctuation">,</span>
			width<span class="token punctuation">:</span> subWidth<span class="token punctuation">,</span>
			height<span class="token punctuation">:</span> subHeight
		<span class="token punctuation">}</span><span class="token punctuation">,</span> level<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>nodes<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QuadTree</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			x<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>x <span class="token operator">+</span> subWidth<span class="token punctuation">,</span>
			y<span class="token punctuation">:</span> this<span class="token punctuation">.</span>bounds<span class="token punctuation">.</span>y <span class="token operator">+</span> subHeight<span class="token punctuation">,</span>
			width<span class="token punctuation">:</span> subWidth<span class="token punctuation">,</span>
			height<span class="token punctuation">:</span> subHeight
		<span class="token punctuation">}</span><span class="token punctuation">,</span> level<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></p></pre></div><p>A quadtree will index all of the objects in the game into nodes and subnodes. All objects within a node could potentially collide, so we will check only those objects for collision. With the quadtree in hand, we are almost ready to implement collision detection in our game.</p><h3 id="updating-objects-for-collision-detection" class="sub-title"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#updating-objects-for-collision-detection" class="permalink" title="Link to this section">Updating Objects for Collision Detection</a></h3><p>There is still one more thing to do before we implement 2D collision detection. Not every object can collide with every other object. For example, a ship won’t collide with it’s own bullet, the same goes for an enemy ship. So we need to check to see if the two objects should collide before we check to see if they are colliding. This means that each object will hold a list of objects that it can collide with and the collision detection algorithm will compare this list with the type of the other object.</p><p>To start implementing collision detection, we will edit the <code>Drawable</code> object.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">function</span> <span class="token function">Drawable<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	this<span class="token punctuation">.</span>init <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment" spellcheck="true">	// Defualt variables
</span>		this<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>width <span class="token operator">=</span> width<span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>height <span class="token operator">=</span> height<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	this<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>canvasWidth <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>canvasHeight <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>collidableWith <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>isColliding <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">;</span>
</code><p><code class=" language-javascript"><span class="token comment" spellcheck="true">	// Define abstract function to be implemented in child objects
</span>	this<span class="token punctuation">.</span>draw <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>move <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>isCollidableWith <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>collidableWith <span class="token operator">===</span> object<span class="token punctuation">.</span>type<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></p></pre></div><p>The object receives two new variables: <code>collidableWith</code> and <code>isColliding</code>, as well as a new function <code>isCollidableWith()</code> to test if the the object can collide with the given object. The isColliding variable tells us when an object is colliding and shouldn’t be redrawn to the canvas.</p><p>With the need to have a list of collidable&nbsp;objects, each object in our game has to implement this change. We’ll start with the <code>Bullet</code> object.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript">	this<span class="token punctuation">.</span>draw <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		this<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">clearRect<span class="token punctuation">(</span></span>this<span class="token punctuation">.</span>x<span class="token number">-1</span><span class="token punctuation">,</span> this<span class="token punctuation">.</span>y<span class="token number">-1</span><span class="token punctuation">,</span> this<span class="token punctuation">.</span>width<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">,</span> this<span class="token punctuation">.</span>height<span class="token operator">+</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>y <span class="token operator">-</span><span class="token operator">=</span> this<span class="token punctuation">.</span>speed<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>isColliding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>self <span class="token operator">===</span> <span class="token string">"bullet"</span> <span class="token operator">&amp;&amp;</span> this<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> <span class="token number">0</span> – this<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>self <span class="token operator">===</span> <span class="token string">"enemyBullet"</span> <span class="token operator">&amp;&amp;</span> this<span class="token punctuation">.</span>y <span class="token operator">&gt;=</span> this<span class="token punctuation">.</span>canvasHeight<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>self <span class="token operator">===</span> <span class="token string">"bullet"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">drawImage<span class="token punctuation">(</span></span>imageRepository<span class="token punctuation">.</span>bullet<span class="token punctuation">,</span> this<span class="token punctuation">.</span>x<span class="token punctuation">,</span> this<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>self <span class="token operator">===</span> <span class="token string">"enemyBullet"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">drawImage<span class="token punctuation">(</span></span>imageRepository<span class="token punctuation">.</span>enemyBullet<span class="token punctuation">,</span> this<span class="token punctuation">.</span>x<span class="token punctuation">,</span> this<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code><p><code class=" language-javascript">	<span class="token comment" spellcheck="true">/*
	 * Resets the bullet values
	 */</span>
	this<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		this<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>alive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>isColliding <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></p></pre></div><p>Just the <code>draw()</code> and <code>clear()</code> functions have to be changed. The draw function adds the check to see if the object is colliding. If it is, return true to the object pool to let it know the bullet can be reused. The clear function just resets the isColliding variable to false.</p><p>The next object we’ll update is the <code>Ship</code> object.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">function</span> <span class="token function">Ship<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	this<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>bulletPool <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Pool</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>bulletPool<span class="token punctuation">.</span><span class="token function">init<span class="token punctuation">(</span></span><span class="token string">"bullet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> fireRate <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>collidableWith <span class="token operator">=</span> <span class="token string">"enemyBullet"</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"ship"</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>draw <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		this<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">drawImage<span class="token punctuation">(</span></span>imageRepository<span class="token punctuation">.</span>spaceship<span class="token punctuation">,</span> this<span class="token punctuation">.</span>x<span class="token punctuation">,</span> this<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>move <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		counter<span class="token operator">++</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">	// Determine if the action is move action
</span>		<span class="token keyword">if</span> <span class="token punctuation">(</span>KEY_STATUS<span class="token punctuation">.</span>left <span class="token operator">||</span> KEY_STATUS<span class="token punctuation">.</span>right <span class="token operator">||</span>
				KEY_STATUS<span class="token punctuation">.</span>down <span class="token operator">||</span> KEY_STATUS<span class="token punctuation">.</span>up<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment" spellcheck="true">	// The ship moved, so erase it’s current image so it can
</span>		<span class="token comment" spellcheck="true">	// be redrawn in it’s new location
</span>			this<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">clearRect<span class="token punctuation">(</span></span>this<span class="token punctuation">.</span>x<span class="token punctuation">,</span> this<span class="token punctuation">.</span>y<span class="token punctuation">,</span> this<span class="token punctuation">.</span>width<span class="token punctuation">,</span> this<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment" spellcheck="true">	// Update x and y according to the direction to move and
</span>		<span class="token comment" spellcheck="true">	// redraw the ship. Change the else if’s to if statements
</span>		<span class="token comment" spellcheck="true">	// to have diagonal movement.
</span>			<span class="token keyword">if</span> <span class="token punctuation">(</span>KEY_STATUS<span class="token punctuation">.</span>left<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span>x <span class="token operator">-</span><span class="token operator">=</span> this<span class="token punctuation">.</span>speed
				<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>x <span class="token operator">&lt;=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true"> // Kep player within the screen
</span>					this<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>KEY_STATUS<span class="token punctuation">.</span>right<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> this<span class="token punctuation">.</span>speed
				<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> this<span class="token punctuation">.</span>canvasWidth – this<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
					this<span class="token punctuation">.</span>x <span class="token operator">=</span> this<span class="token punctuation">.</span>canvasWidth – this<span class="token punctuation">.</span>width<span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>KEY_STATUS<span class="token punctuation">.</span>up<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span>y <span class="token operator">-</span><span class="token operator">=</span> this<span class="token punctuation">.</span>speed
				<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>y <span class="token operator">&lt;=</span> this<span class="token punctuation">.</span>canvasHeight<span class="token operator">/</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">)</span>
					this<span class="token punctuation">.</span>y <span class="token operator">=</span> this<span class="token punctuation">.</span>canvasHeight<span class="token operator">/</span><span class="token number">4</span><span class="token operator">*</span><span class="token number">3</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>KEY_STATUS<span class="token punctuation">.</span>down<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> this<span class="token punctuation">.</span>speed
				<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>y <span class="token operator">&gt;=</span> this<span class="token punctuation">.</span>canvasHeight – this<span class="token punctuation">.</span>height<span class="token punctuation">)</span>
					this<span class="token punctuation">.</span>y <span class="token operator">=</span> this<span class="token punctuation">.</span>canvasHeight – this<span class="token punctuation">.</span>height<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
</code><p><code class=" language-javascript">		<span class="token comment" spellcheck="true">	// Finish by redrawing the ship
</span>			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>this<span class="token punctuation">.</span>isColliding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span><span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>KEY_STATUS<span class="token punctuation">.</span>space <span class="token operator">&amp;&amp;</span> counter <span class="token operator">&gt;=</span> fireRate <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span>this<span class="token punctuation">.</span>isColliding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span><span class="token function">fire<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></p></pre></div><p>The ship object will set its <code>type</code> and will be collidable with enemy bullets. In the <code>draw()</code> function, we will only redraw the ship and let it fire if it is not colliding with anything.</p><p>Next up is the <code>Enemy</code> object.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">function</span> <span class="token function">Enemy<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> percentFire <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token number">01</span><span class="token punctuation">;</span>
	<span class="token keyword">var</span> chance <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>alive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>collidableWith <span class="token operator">=</span> <span class="token string">"bullet"</span><span class="token punctuation">;</span>
	this<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"enemy"</span><span class="token punctuation">;</span>
	<span class="token comment" spellcheck="true">/*
	 * Move the enemy
	 */</span>
	this<span class="token punctuation">.</span>draw <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		this<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">clearRect<span class="token punctuation">(</span></span>this<span class="token punctuation">.</span>x<span class="token number">-1</span><span class="token punctuation">,</span> this<span class="token punctuation">.</span>y<span class="token punctuation">,</span> this<span class="token punctuation">.</span>width<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span> this<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>x <span class="token operator">+</span><span class="token operator">=</span> this<span class="token punctuation">.</span>speedX<span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>y <span class="token operator">+</span><span class="token operator">=</span> this<span class="token punctuation">.</span>speedY<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>x <span class="token operator">&lt;=</span> this<span class="token punctuation">.</span>leftEdge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span>speedX <span class="token operator">=</span> this<span class="token punctuation">.</span>speed<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>x <span class="token operator">&gt;=</span> this<span class="token punctuation">.</span>rightEdge <span class="token operator">+</span> this<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span>speedX <span class="token operator">=</span> <span class="token operator">-</span>this<span class="token punctuation">.</span>speed<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>this<span class="token punctuation">.</span>y <span class="token operator">&gt;=</span> this<span class="token punctuation">.</span>bottomEdge<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">1.5</span><span class="token punctuation">;</span>
			this<span class="token punctuation">.</span>speedY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			this<span class="token punctuation">.</span>y <span class="token operator">-</span><span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
			this<span class="token punctuation">.</span>speedX <span class="token operator">=</span> <span class="token operator">-</span>this<span class="token punctuation">.</span>speed<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>this<span class="token punctuation">.</span>isColliding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
			this<span class="token punctuation">.</span>context<span class="token punctuation">.</span><span class="token function">drawImage<span class="token punctuation">(</span></span>imageRepository<span class="token punctuation">.</span>enemy<span class="token punctuation">,</span> this<span class="token punctuation">.</span>x<span class="token punctuation">,</span> this<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token comment" spellcheck="true">	// Enemy has a chance to shoot every movement
</span>			chance <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor<span class="token punctuation">(</span></span>Math<span class="token punctuation">.</span><span class="token function">random<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">101</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>chance<span class="token operator">/</span><span class="token number">100</span> <span class="token operator">&lt;</span> percentFire<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				this<span class="token punctuation">.</span><span class="token function">fire<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code><p><code class=" language-javascript">	<span class="token comment" spellcheck="true">/*
	 * Resets the enemy values
	 */</span>
	this<span class="token punctuation">.</span>clear <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		this<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>speed <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>speedX <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>speedY <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>alive <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		this<span class="token punctuation">.</span>isColliding <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></p></pre></div><p>The enemy object will set its <code>type</code> and will be collidable with the player bullets. It will only be redrawn and shoot if it is not colliding, and the <code>clear()</code> function resets the isColliding variable.</p><p>The last object to edit is the <code>Pool</code> object.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript">this<span class="token punctuation">.</span>init <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">==</span> <span class="token string">"bullet"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment" spellcheck="true">	// Initalize the object
</span>				<span class="token keyword">var</span> bullet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bullet</span><span class="token punctuation">(</span><span class="token string">"bullet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				bullet<span class="token punctuation">.</span><span class="token function">init<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> imageRepository<span class="token punctuation">.</span>bullet<span class="token punctuation">.</span>width<span class="token punctuation">,</span> imageRepository<span class="token punctuation">.</span>bullet<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
				bullet<span class="token punctuation">.</span>collidableWith <span class="token operator">=</span> <span class="token string">"enemy"</span><span class="token punctuation">;</span>
				bullet<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"bullet"</span><span class="token punctuation">;</span>
				pool<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> bullet<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">==</span> <span class="token string">"enemy"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> enemy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Enemy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				enemy<span class="token punctuation">.</span><span class="token function">init<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> imageRepository<span class="token punctuation">.</span>enemy<span class="token punctuation">.</span>width<span class="token punctuation">,</span> imageRepository<span class="token punctuation">.</span>enemy<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
				pool<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> enemy<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>object <span class="token operator">==</span> <span class="token string">"enemyBullet"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">var</span> bullet <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bullet</span><span class="token punctuation">(</span><span class="token string">"enemyBullet"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
				bullet<span class="token punctuation">.</span><span class="token function">init<span class="token punctuation">(</span></span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span> imageRepository<span class="token punctuation">.</span>enemyBullet<span class="token punctuation">.</span>width<span class="token punctuation">,</span> imageRepository<span class="token punctuation">.</span>enemyBullet<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
				bullet<span class="token punctuation">.</span>collidableWith <span class="token operator">=</span> <span class="token string">"ship"</span><span class="token punctuation">;</span>
				bullet<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"enemyBullet"</span><span class="token punctuation">;</span>
				pool<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> bullet<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code><p><code class=" language-javascript">	this<span class="token punctuation">.</span>getPool <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>pool<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>alive<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				obj<span class="token punctuation">.</span><span class="token function">push<span class="token punctuation">(</span></span>pool<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> obj<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
</code></p></pre></div><p>For each type of bullet, the player bullets and the enemy bullets, we will set the <code>type</code> and <code>collidableWith</code> variables accordingly. We also add a new function, <code>getPool()</code> to return all alive objects in the pool as an array that will then be inserted into the quadtree.</p><p>With all our objects updated, we’re nearly ready to implement collision detection.</p><h3 id="the-final-step" class="sub-title"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#the-final-step" class="permalink" title="Link to this section">The Final Step</a></h3><p>To implement the quad tree in our game, we add just one line to the end of the <code>Game</code> object, just before <code>return true;</code></p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token comment" spellcheck="true">// Start QuadTree
</span>this<span class="token punctuation">.</span>quadTree <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">QuadTree</span><span class="token punctuation">(</span><span class="token punctuation">{</span>x<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>y<span class="token punctuation">:</span><span class="token number">0</span><span class="token punctuation">,</span>width<span class="token punctuation">:</span>this<span class="token punctuation">.</span>mainCanvas<span class="token punctuation">.</span>width<span class="token punctuation">,</span>height<span class="token punctuation">:</span>this<span class="token punctuation">.</span>mainCanvas<span class="token punctuation">.</span>height<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Next we can update the <code>animate()</code> function to use the quadtree.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">function</span> <span class="token function">animate<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment" spellcheck="true">	// Insert objects into quadtree
</span>	game<span class="token punctuation">.</span>quadTree<span class="token punctuation">.</span><span class="token function">clear<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>quadTree<span class="token punctuation">.</span><span class="token function">insert<span class="token punctuation">(</span></span>game<span class="token punctuation">.</span>ship<span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>quadTree<span class="token punctuation">.</span><span class="token function">insert<span class="token punctuation">(</span></span>game<span class="token punctuation">.</span>ship<span class="token punctuation">.</span>bulletPool<span class="token punctuation">.</span><span class="token function">getPool<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>quadTree<span class="token punctuation">.</span><span class="token function">insert<span class="token punctuation">(</span></span>game<span class="token punctuation">.</span>enemyPool<span class="token punctuation">.</span><span class="token function">getPool<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>quadTree<span class="token punctuation">.</span><span class="token function">insert<span class="token punctuation">(</span></span>game<span class="token punctuation">.</span>enemyBulletPool<span class="token punctuation">.</span><span class="token function">getPool<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">detectCollision<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><p><code class=" language-javascript"><span class="token comment" spellcheck="true">	// Animate game objects
</span>	<span class="token function">requestAnimFrame<span class="token punctuation">(</span></span> animate <span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>background<span class="token punctuation">.</span><span class="token function">draw<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>ship<span class="token punctuation">.</span><span class="token function">move<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>ship<span class="token punctuation">.</span>bulletPool<span class="token punctuation">.</span><span class="token function">animate<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>enemyPool<span class="token punctuation">.</span><span class="token function">animate<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>enemyBulletPool<span class="token punctuation">.</span><span class="token function">animate<span class="token punctuation">(</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></p></pre></div><p>The first thing we do is clear the quadtree and add all objects to it. Once all objects are added to the quadtree, we run our collision detection algorithm in <code>detectCollision()</code>. We finish by moving and animating all objects on the screen. This order ensures that any objects that collide in the frame are not redrawn at the end of the frame.</p><p>The last bit of code is the <code>detectCollision()</code> function.</p><div class="code-block"><pre class=" language-javascript"><code class=" language-javascript"><span class="token keyword">function</span> <span class="token function">detectCollision<span class="token punctuation">(</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> objects <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	game<span class="token punctuation">.</span>quadTree<span class="token punctuation">.</span><span class="token function">getAllObjects<span class="token punctuation">(</span></span>objects<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> len <span class="token operator">=</span> objects<span class="token punctuation">.</span>length<span class="token punctuation">;</span> x <span class="token operator">&lt;</span> len<span class="token punctuation">;</span> x<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		game<span class="token punctuation">.</span>quadTree<span class="token punctuation">.</span><span class="token function">findObjects<span class="token punctuation">(</span></span>obj <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">for</span> <span class="token punctuation">(</span>y <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> length <span class="token operator">=</span> obj<span class="token punctuation">.</span>length<span class="token punctuation">;</span> y <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> y<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</code><p><code class=" language-javascript">		<span class="token comment" spellcheck="true">	// DETECT COLLISION ALGORITHM
</span>			<span class="token keyword">if</span> <span class="token punctuation">(</span> objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>collidableWith <span class="token operator">===</span> obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>type <span class="token operator">&amp;&amp;</span>
				<span class="token punctuation">(</span>objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">&lt;</span> obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>width <span class="token operator">&amp;&amp;</span>
			     objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">+</span> objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>width  <span class="token operator">&gt;</span> obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>x <span class="token operator">&amp;&amp;</span>
			     objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">&lt;</span> obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">&amp;&amp;</span>
				 objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>y <span class="token operator">+</span> objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>height <span class="token operator">&gt;</span> obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>y<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				objects<span class="token punctuation">[</span>x<span class="token punctuation">]</span><span class="token punctuation">.</span>isColliding <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
				obj<span class="token punctuation">[</span>y<span class="token punctuation">]</span><span class="token punctuation">.</span>isColliding <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></p></pre></div><p>The function first gets all objects in the quadtree and saves them to a single array. It then loops over each object in the array and retrieves another array of objects that the object could collide with. Lastly, it runs the collision detection algorithm against these objects to see if they collide.</p><p>We now have a game that is capable of checking for collisions at 60FPS. It took a bit of refactoring to get there, but it was all worth it in the end.</p><h2 id="conclusion">Conclusion</h2><p>We had to update almost every object and function in the game, but it now implements 2D collision detection fairly quickly. We also learned a good technique for helping speed up collision detection by implementing a quadtree to reduce collision checks.</p><p>In the next and final tutorial, we’ll add finishing touches to our game such as sound, score, and a game over screen. We’ll also talk about ways that you could improve and expand the game.</p><div class="zem_rp_wrap zem_rp_th_vertical_m" id="zem_rp_first"><div class="zem_rp_content"><h3 class="related_post_title">Related Posts</h3><ul class="related_post zem_rp" style="visibility: visible"><li data-position="0" data-poid="in-688" data-post-type="none"><a href="http://blog.sklambert.com/html5-canvas-game-the-enemy-ships/" class="zem_rp_thumbnail"><img src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/enemies_on_bg.png" alt="HTML5 Canvas Game: The Enemy Ships" width="100" height="100"></a><a href="http://blog.sklambert.com/html5-canvas-game-the-enemy-ships/" class="zem_rp_title">HTML5 Canvas Game: The Enemy Ships</a></li><li data-position="1" data-poid="in-882" data-post-type="none"><a href="http://blog.sklambert.com/html5-canvas-game-html5-audio-and-finishing-touches/" class="zem_rp_thumbnail"><img src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/collision_detection(1).png" alt="HTML5 Canvas Game: HTML5 Audio and Finishing Touches" width="100" height="100"></a><a href="http://blog.sklambert.com/html5-canvas-game-html5-audio-and-finishing-touches/" class="zem_rp_title">HTML5 Canvas Game: HTML5 Audio and Finishing Touches</a></li><li data-position="2" data-poid="in-621" data-post-type="none"><a href="http://blog.sklambert.com/html5-canvas-game-the-player-ship/" class="zem_rp_thumbnail"><img src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/ship_on_bg.png" alt="HTML5 Canvas Game: The Player Ship" width="100" height="100"></a><a href="http://blog.sklambert.com/html5-canvas-game-the-player-ship/" class="zem_rp_title">HTML5 Canvas Game: The Player Ship</a></li><li data-position="3" data-poid="in-450" data-post-type="none"><a href="http://blog.sklambert.com/html5-canvas-game-panning-a-background/" class="zem_rp_thumbnail"><img src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/bg.png" alt="HTML5 Canvas Game: Panning a Background" width="100" height="100"></a><a href="http://blog.sklambert.com/html5-canvas-game-panning-a-background/" class="zem_rp_title">HTML5 Canvas Game: Panning a Background</a></li><li data-position="4" data-poid="in-20" data-post-type="none"><a href="http://blog.sklambert.com/galaxian-html5-game/" class="zem_rp_thumbnail"><img src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/space_shooter.png" alt="Galaxian Style HTML5 Game" width="100" height="100"></a><a href="http://blog.sklambert.com/galaxian-html5-game/" class="zem_rp_title">Galaxian Style HTML5 Game</a></li></ul></div></div><div class="series-next-prev-wrapper bottom"><div class="series-prev"> <a href="http://blog.sklambert.com/html5-canvas-game-the-enemy-ships/" title="HTML5 Canvas Game: The Enemy Ships" class="series-prev-link">« Previous series post</a></div><div class="series-next"> <a href="http://blog.sklambert.com/html5-canvas-game-html5-audio-and-finishing-touches/" title="HTML5 Canvas Game: HTML5 Audio and Finishing Touches" class="series-next-link">Next series post »</a></div></div> </article><div class="comments"><a href="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/#disqus_thread" class="show-comments">17 Comments</a></div><div id="disqus_thread"></div> </section><aside class="secondary" role="complementary"><div id="social" class="widget"><ul class="social"><li class="social-listItem"><a href="http://blog.sklambert.com/feed/rss/" id="rss" class="social-link icon-feed" title="Subscribe to my RSS feed"></a></li><li class="social-listItem"><a href="https://twitter.com/StevenKLambert" id="twitter" class="social-link icon-twitter" title="Follow me on Twitter" onclick="javascript:window.open(&#39;https://twitter.com/StevenKLambert&#39;); return false;"></a></li><li class="social-listItem"><a href="https://plus.google.com/u/0/+StevenLambertK/" id="google-plus" class="social-link icon-google-plus" title="Connect with me on Google+" onclick="javascript:window.open(&#39;https://plus.google.com/u/0/+StevenLambertK/&#39;); return false;"></a></li><li class="social-listItem"><a href="https://github.com/straker" id="github" class="social-link icon-github" title="View my GitHub profile" onclick="javascript:window.open(&#39;https://github.com/straker&#39;); return false;"></a></li><li class="social-listItem"><a href="mailto:steven@sklambert.com" id="email" class="social-link icon-mail" title="Send me an email"></a></li></ul></div><section id="blog_subscription-2" class="widget jetpack_subscription_widget section"><h3 class="widget-title"><label for="subscribe-field"></label></h3><form action="" method="post" accept-charset="utf-8" id="subscribe-blog-blog_subscription-2"><p id="subscribe-text"></p><p id="subscribe-email"><input type="text" name="email" value="Email Address" id="subscribe-field" onclick="if ( this.value == &#39;Email Address&#39; ) { this.value = &#39;&#39;; }" onblur="if ( this.value == &#39;&#39; ) { this.value = &#39;Email Address&#39;; }"></p><p id="subscribe-submit"> <input type="hidden" name="action" value="subscribe"> <input type="hidden" name="source" value="http://blog.sklambert.com/html5-canvas-game-2d-collision-detection/"> <input type="hidden" name="sub-type" value="widget"> <input type="hidden" name="redirect_fragment" value="blog_subscription-2"> <input type="submit" value="Subscribe" name="jetpack_subscriptions_widget"></p></form> </section><section id="text-2" class="widget widget_text section"><h3 class="widget-title">About Steven Lambert</h3><div class="textwidget"><img class="about-me-image" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/me.png">I started out my career as a web developer while I was still in college, but I have always had a fasination with making games. When the possibility of making games using HTML5 was introduced, I couldn't help but try my hand at it. Since then, I have made a few games and created this blog to help others understand the current state of the web as it applies to HTML5 game development.</div> </section><style>.JPV_list{overflow:hidden}.JPV_thumbnail{width:45%}.JPV_thumbnail>.JPV_thumbnail_img{max-width:125px;height:auto}.JPV_thumbnail+.JPV_text{width:45%;padding-bottom:10px;text-align:center;margin-top:-5px}.JPV_thumbnail_title{float:left;width:21.276596%}.JPV_thumbnail_title>.JPV_thumbnail_img{max-width:40px;height:auto}.JPV_thumbnail_title+.JPV_text{float:right;width:73.404255%;padding-bottom:10px}</style><section id="jetpack-post-views-widget-2" class="widget jetpack-post-views section"><h3 class="widget-title">Popular Posts</h3><ul><li class="JPV_list"><a href="http://blog.sklambert.com/html5-canvas-game-panning-a-background/" title="HTML5 Canvas Game: Panning a Background" class="JPV_title">HTML5 Canvas Game: Panning a Background</a></li><li class="JPV_list"><a href="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks.html" title="HTML5 Canvas Game: 2D Collision Detection" class="JPV_title">HTML5 Canvas Game: 2D Collision Detection</a></li><li class="JPV_list"><a href="http://blog.sklambert.com/html5-canvas-game-the-player-ship/" title="HTML5 Canvas Game: The Player Ship" class="JPV_title">HTML5 Canvas Game: The Player Ship</a></li><li class="JPV_list"><a href="http://blog.sklambert.com/galaxian-html5-game/" title="Galaxian Style HTML5 Game" class="JPV_title">Galaxian Style HTML5 Game</a></li><li class="JPV_list"><a href="http://blog.sklambert.com/html5-canvas-game-html5-audio-and-finishing-touches/" title="HTML5 Canvas Game: HTML5 Audio and Finishing Touches" class="JPV_title">HTML5 Canvas Game: HTML5 Audio and Finishing Touches</a></li></ul></section> <section id="recent-posts-2" class="widget widget_recent_entries section"><h3 class="widget-title">Recent Posts</h3><ul><li> <a href="http://blog.sklambert.com/html5-game-tutorial-prototypal-inheritance/">HTML5 Game Tutorial: Prototypal Inheritance</a></li><li> <a href="http://blog.sklambert.com/learn-programming-and-game-development/">How to Learn Programming and Game Development</a></li><li> <a href="http://blog.sklambert.com/html5-game-tutorial-module-pattern/">HTML5 Game Tutorial: The Module Pattern</a></li><li> <a href="http://blog.sklambert.com/using-time-based-animation-implement/">Why You Should be Using Time-based Animation and How to Implement it</a></li><li> <a href="http://blog.sklambert.com/made-first-game-two-days/">How I Made My First Game in Two Days</a></li></ul> </section> </aside></main><footer class="site-footer" role="contentinfo"><div class="container"><p class="section">Copyright © Steven Lambert 2012 - 2014</p></div> </footer><script type="text/javascript">var s=document.getElementById('subscribe-field');if(s)s.removeAttribute('style');</script><script type="text/javascript">/*<![CDATA[*/var disqus_shortname='blogsklambertcom';(function(){var nodes=document.getElementsByTagName('span');for(var i=0,url;i<nodes.length;i++){if(nodes[i].className.indexOf('dsq-postid')!=-1){nodes[i].parentNode.setAttribute('data-disqus-identifier',nodes[i].getAttribute('rel'));url=nodes[i].parentNode.href.split('#',1);if(url.length==1)url=url[0];else url=url[1]
nodes[i].parentNode.href=url+'#disqus_thread';}}
var s=document.createElement('script');s.async=true;s.type='text/javascript';s.src='//'+'disqus.com/forums/'+disqus_shortname+'/count.js';(document.getElementsByTagName('HEAD')[0]||document.getElementsByTagName('BODY')[0]).appendChild(s);}());/*]]>*/</script><div style="display:none"></div><script type="text/javascript">jQuery(document).on('ready post-load',function(){jQuery('a.share-twitter').on('click',function(){window.open(jQuery(this).attr('href'),'wpcomtwitter','menubar=1,resizable=1,width=600,height=350');return false;});});</script><script type="text/javascript">(function(){var po=document.createElement('script');po.type='text/javascript';po.async=true;po.src='https://apis.google.com/js/plusone.js';var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po,s);})();</script><script type="text/javascript">jQuery(document).on('ready post-load',function(){jQuery('a.share-facebook').on('click',function(){window.open(jQuery(this).attr('href'),'wpcomfacebook','menubar=1,resizable=1,width=600,height=400');return false;});});</script><script type="text/javascript" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/M9TPSi0pSEzO1s_NTynNSS3WL8jIL8nPg1IA.js"></script><script type="text/javascript" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/devicepx-jetpack.js"></script><script type="text/javascript" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/M9Avzs5JzE1KLSoJyUjNTdXPKtbPzU_KzEnVMcAilZ6Ym1qMVaagKLM4FwA.js"></script><script type="text/javascript">var recaptcha_options={"lang":"en"};</script><script type="text/javascript" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/M9TPSi0pSEzO1s_NTynNSS3WL85ILEpNSUxJqQQzM_PSAQ.js"></script><script src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/e-201419.js" type="text/javascript"></script><script type="text/javascript">st_go({v:'ext',j:'1:2.9.3',blog:'35860617',post:'716',tz:'-6'});var load_cmc=function(){linktracker_init(35860617,716,2);};if(typeof addLoadEvent!='undefined')addLoadEvent(load_cmc);else load_cmc();</script><img id="wpstats" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/g.gif" alt=""><iframe name="oauth2relay1070949459" id="oauth2relay1070949459" src="./HTML5 Canvas Game  2D Collision Detection - Programming Tutorials, Tips, and Tricks_files/postmessageRelay.html" tabindex="-1" style="width: 1px; height: 1px; position: absolute; top: -100px;"></iframe></body></html>